<!DOCTYPE html>
<html>
<head>
    <title>Teste Subprocesso Problem√°tico</title>
</head>
<body>
    <h1>Teste do Subprocesso Problem√°tico</h1>
    <p>Este script ir√° redirecionar para a p√°gina de riscos e simular a sele√ß√£o do subprocesso problem√°tico.</p>
    
    <script>
        // Aguardar um pouco e redirecionar
        setTimeout(() => {
            window.location.href = 'http://localhost:8080/processos/riscos-trabalho';
        }, 2000);
        
        // Ap√≥s o redirecionamento, simular a sele√ß√£o do subprocesso
        setTimeout(() => {
            // Tentar encontrar e expandir os filtros
            const expandButton = document.querySelector('[data-testid="expand-filters"]') || 
                               document.querySelector('button[aria-expanded="false"]') ||
                               document.querySelector('button:contains("Filtros")');
            
            if (expandButton) {
                console.log('üîç Expandindo filtros...');
                expandButton.click();
                
                // Aguardar um pouco para os dados carregarem
                setTimeout(() => {
                    // Tentar encontrar o select de subprocessos
                    const subprocessoSelect = document.querySelector('select[name="subprocesso"]') ||
                                             document.querySelector('#subprocesso') ||
                                             document.querySelector('[data-testid="subprocesso-select"]');
                    
                    if (subprocessoSelect) {
                        console.log('üîç Selecionando subprocesso problem√°tico...');
                        subprocessoSelect.value = '1fb553a9-2426-4fa4-a7dc-8ce87a55225b';
                        
                        // Disparar evento de mudan√ßa
                        const event = new Event('change', { bubbles: true });
                        subprocessoSelect.dispatchEvent(event);
                        
                        console.log('‚úÖ Subprocesso selecionado!');
                    } else {
                        console.log('‚ùå Select de subprocesso n√£o encontrado');
                        console.log('Elementos dispon√≠veis:', document.querySelectorAll('select'));
                    }
                }, 3000);
            } else {
                console.log('‚ùå Bot√£o de expandir filtros n√£o encontrado');
            }
        }, 5000);
    </script>
</body>
</html>